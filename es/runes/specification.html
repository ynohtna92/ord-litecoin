<!DOCTYPE HTML>
<html lang="es" class="coal" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Especificación - Ordinal Theory Handbook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../language-picker.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('coal')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introducción</a></li><li class="chapter-item expanded "><a href="../overview.html"><strong aria-hidden="true">1.</strong> Descripción General</a></li><li class="chapter-item expanded "><a href="../digital-artifacts.html"><strong aria-hidden="true">2.</strong> Artefactos Digitales</a></li><li class="chapter-item expanded "><a href="../inscriptions.html"><strong aria-hidden="true">3.</strong> Inscripciones</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../inscriptions/delegate.html"><strong aria-hidden="true">3.1.</strong> Delegado</a></li><li class="chapter-item expanded "><a href="../inscriptions/metadata.html"><strong aria-hidden="true">3.2.</strong> Metadatos</a></li><li class="chapter-item expanded "><a href="../inscriptions/pointer.html"><strong aria-hidden="true">3.3.</strong> Puntero</a></li><li class="chapter-item expanded "><a href="../inscriptions/provenance.html"><strong aria-hidden="true">3.4.</strong> Proveniencia</a></li><li class="chapter-item expanded "><a href="../inscriptions/recursion.html"><strong aria-hidden="true">3.5.</strong> Recursión</a></li><li class="chapter-item expanded "><a href="../inscriptions/rendering.html"><strong aria-hidden="true">3.6.</strong> Renderizado</a></li></ol></li><li class="chapter-item expanded "><a href="../runes.html"><strong aria-hidden="true">4.</strong> Runas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../runes/specification.html" class="active"><strong aria-hidden="true">4.1.</strong> Especificación</a></li></ol></li><li class="chapter-item expanded "><a href="../faq.html"><strong aria-hidden="true">5.</strong> Preguntas Frecuentes</a></li><li class="chapter-item expanded "><a href="../contributing.html"><strong aria-hidden="true">6.</strong> Contribuir</a></li><li class="chapter-item expanded "><a href="../donate.html"><strong aria-hidden="true">7.</strong> Donaciones</a></li><li class="chapter-item expanded "><a href="../guides.html"><strong aria-hidden="true">8.</strong> Guías</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/explorer.html"><strong aria-hidden="true">8.1.</strong> Explorador</a></li><li class="chapter-item expanded "><a href="../guides/wallet.html"><strong aria-hidden="true">8.2.</strong> Monedero</a></li><li class="chapter-item expanded "><a href="../guides/batch-inscribing.html"><strong aria-hidden="true">8.3.</strong> Inscribiendo por Lotes</a></li><li class="chapter-item expanded "><a href="../guides/collecting.html"><strong aria-hidden="true">8.4.</strong> Coleccionar</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/collecting/sparrow-wallet.html"><strong aria-hidden="true">8.4.1.</strong> Monedero Sparrow</a></li></ol></li><li class="chapter-item expanded "><a href="../guides/moderation.html"><strong aria-hidden="true">8.5.</strong> Moderación</a></li><li class="chapter-item expanded "><a href="../guides/reindexing.html"><strong aria-hidden="true">8.6.</strong> Reindexación</a></li><li class="chapter-item expanded "><a href="../guides/sat-hunting.html"><strong aria-hidden="true">8.7.</strong> Caza de Sats</a></li><li class="chapter-item expanded "><a href="../guides/settings.html"><strong aria-hidden="true">8.8.</strong> Configuración</a></li><li class="chapter-item expanded "><a href="../guides/teleburning.html"><strong aria-hidden="true">8.9.</strong> Telequemado</a></li><li class="chapter-item expanded "><a href="../guides/testing.html"><strong aria-hidden="true">8.10.</strong> Pruebas</a></li></ol></li><li class="chapter-item expanded "><a href="../bounties.html"><strong aria-hidden="true">9.</strong> Recompensas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../bounty/0.html"><strong aria-hidden="true">9.1.</strong> Recompensa Ordinal 0: 100,000 sats reclamados!</a></li><li class="chapter-item expanded "><a href="../bounty/1.html"><strong aria-hidden="true">9.2.</strong> Recompensa Ordinal 1: 200,000 sats reclamados!</a></li><li class="chapter-item expanded "><a href="../bounty/2.html"><strong aria-hidden="true">9.3.</strong> Recompensa Ordinal 2: 300,000 sats reclamados!</a></li><li class="chapter-item expanded "><a href="../bounty/3.html"><strong aria-hidden="true">9.4.</strong> Recompensa Ordinal 3: 400,000 sats</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ordinal Theory Handbook</h1>

                    <div class="right-buttons">
                        <button id="language-toggle" class="icon-button" type="button"
                                title="Change language" aria-label="Change language"
                                aria-haspopup="true" aria-expanded="false"
                                aria-controls="language-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="language-list" class="theme-popup" aria-label="Languages" role="menu">
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="en">English</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="de">Deutsch</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="fr">Français</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="es">Español</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="pt">Português</a>
                          </button></li>
                           <li role="none"><button role="menuitem" class="theme">
                              <a id="ru">Русский</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="zh">中文版</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ja">日本語版</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ko">한국어</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="fil">Filipino</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ar">العربية</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="hi">हिंदी</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="it">Italiano</a>
                          </button></li>
                        </ul>

                        <script>
                          let langToggle = document.getElementById("language-toggle");
                          let langList = document.getElementById("language-list");
                          langToggle.addEventListener("click", (event) => {
                              langList.style.display = langList.style.display == "block" ? "none" : "block";
                          });
                          let selectedLang = document.getElementById("es");
                          if (selectedLang) {
                              selectedLang.parentNode.classList.add("theme-selected");
                          }

                          // The path to the root, taking the current
                          // language into account.
                          let full_path_to_root = "../../";
                          // The page path (mdbook only gives us
                          // access to the path to the Markdown file).
                          let path = "runes/specification.md".replace(/\.md$/, ".html");
                          for (let lang of langList.querySelectorAll("a")) {
                              if (lang.id == "en") {
                                  lang.href = `${full_path_to_root}${path}`;
                              } else {
                                  lang.href = `${full_path_to_root}${lang.id}/${path}`;
                              }
                          }
                        </script>

                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ordinals/ord" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="las-runas-no-tienen-una-especificación-formal"><a class="header" href="#las-runas-no-tienen-una-especificación-formal">Las Runas No Tienen una Especificación Formal</a></h1>
<p><code>ord</code> es la implementación de referencia de las Runas y constituye la especificación normativa del protocolo de Runas.</p>
<p>Nada de lo que leas aquí o en cualquier otro lugar, aparte del código de <code>ord</code>, constituye una especificación oficial. Esta descripción en prosa del protocolo de Runas se proporciona como una guía sobre el comportamiento de <code>ord</code>, y siempre se debe consultar el código de <code>ord</code> para confirmar la exactitud de cualquier descripción en prosa.</p>
<p>Si, debido a un error o bug en <code>ord</code>, este documento se desvía del comportamiento real de <code>ord</code> y resulta poco práctico modificar el comportamiento de <code>ord</code>, este documento se actualizará para reflejar el comportamiento real de <code>ord</code>.</p>
<p>Los usuarios que vayan a utilizar implementaciones alternativas lo hacen bajo su propio riesgo. Se recomienda encarecidamente a los servicios que deseen integrar Runas que utilicen <code>ord</code> para realizar transacciones de Runas y para determinar el estado de las runas, los minteos y los saldos.</p>
<h2 id="piedras-rúnicas-runestones"><a class="header" href="#piedras-rúnicas-runestones">Piedras Rúnicas (Runestones)</a></h2>
<p>Los mensajes del protocolo de Runas se denominan "runestones".</p>
<p>El protocolo de Runas se activa en el bloque 840,000, y las runestones en bloques anteriores se ignoran.</p>
<p>En términos abstractos, los runestones contienen los siguientes campos:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Runestone {
  edicts: Vec&lt;Edict&gt;,
  etching: Option&lt;Etching&gt;,
  mint: Option&lt;RuneId&gt;,
  pointer: Option&lt;u32&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>Las Runas se crean mediante grabados (etchings):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Etching {
  divisibility: Option&lt;u8&gt;,
  premine: Option&lt;u128&gt;,
  rune: Option&lt;Rune&gt;,
  spacers: Option&lt;u32&gt;,
  symbol: Option&lt;char&gt;,
  terms: Option&lt;Terms&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>Los cuales pueden tener estos términos de minteo:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Terms {
  amount: Option&lt;u128&gt;,
  cap: Option&lt;u128&gt;,
  height: (Option&lt;u64&gt;, Option&lt;u64&gt;),
  offset: (Option&lt;u64&gt;, Option&lt;u64&gt;),
}
<span class="boring">}</span></code></pre></pre>
<p>Las runas se transfieren por medio de edictos (edict):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Edict {
  id: RuneId,
  amount: u128,
  output: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Los IDs de las runas están codificados con la altura del bloque y el índice de transacción de la transacción en la cual la runa fue grabada:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct RuneId {
  block: u64,
  tx: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Los ID de las Runas son representados textualmente como <code>BLOCK:TX</code>.</p>
<p>Los nombres de las runas se codifican como enteros modificados en base 26:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Rune(u128);
<span class="boring">}</span></code></pre></pre>
<h3 id="descifrado"><a class="header" href="#descifrado">Descifrado</a></h3>
<p>Las piedras rúnicas se descifran  basándose en las las transacciones con los siguientes pasos:</p>
<ol>
<li>
<p>Encuentra la primera salida de transacción cuyo script pubkey comience con <code>OP_RETURN OP_13</code>.</p>
</li>
<li>
<p>Concatenar todos los siguientes pushes de datos en un búfer.</p>
</li>
<li>
<p>Decodificar del búfer la secuencia de enteros de 128 bits <a href="https://en.wikipedia.org/wiki/LEB128">LEB128</a>.</p>
</li>
<li>
<p>Analizar y convertir la secuencia de enteros en un mensaje sin tipo (untyped).</p>
</li>
<li>
<p>Analizar y convertir el mensaje sin tipo (untyped) en una piedra rúnica.</p>
</li>
</ol>
<p>El descifrado puede producir una piedra rúnica mal formada, denominada <a href="https://es.wikipedia.org/wiki/Cenotafio">cenotafio</a>.</p>
<h4 id="localizando-la-salida-de-la-piedra-rúnica"><a class="header" href="#localizando-la-salida-de-la-piedra-rúnica">Localizando la Salida de la Piedra Rúnica</a></h4>
<p>Se examinan las salidas para identificar el primer script pubkey que comienza con <code>OP_RETURN OP_13</code>. Si el descifrado no tiene éxito, no se tomarán en cuenta las salidas coincidentes siguientes.</p>
<h4 id="creación-del-búfer"><a class="header" href="#creación-del-búfer">Creación del Búfer</a></h4>
<p>El búfer se ensambla concatenando los pushes de datos que vienen después de <code>OP_13</code>, en el script pubkey correspondiente.</p>
<p>Los pushes de datos abarcan los opcodes del 0 al 78, el 78 incluido. Si se encuentra un opcode distinto, es decir, cualquier opcode igual o superior al 79, la piedra rúnica descifrada resultará ser un cenotafio sin grabado, minteo ni edictos.</p>
<h4 id="decodificación-la-secuencia-de-enteros"><a class="header" href="#decodificación-la-secuencia-de-enteros">Decodificación la Secuencia de Enteros</a></h4>
<p>Del búfer se extrae y decodifica una secuencia de enteros de 128 bits como varints LEB128.</p>
<p>Los varints LEB128 se codifican como una serie de bytes, cada uno con el bit más significativo establecido, excepto el último.</p>
<p>La piedra rúnica decodificada será un cenotafio sin grabado, minteo ni edictos si un varint LEB128 contiene más de 18 bytes, desborda (overflow) un u128, o está truncado. Esto significaría que se alcanza el final del búfer de carga útil antes de encontrar un byte con el bit de continuación que no se ha establecido.</p>
<h4 id="análisis-y-conversión-del-mensaje"><a class="header" href="#análisis-y-conversión-del-mensaje">Análisis y Conversión del Mensaje</a></h4>
<p>La secuencia de enteros se analiza y se convierte en un mensaje sin tipo (untyped):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Message {
  fields: Map&lt;u128, Vec&lt;u128&gt;&gt;,
  edicts: Vec&lt;Edict&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>Los enteros se interpretan como una secuencia de pares de etiqueta/valor (tag/value), en donde las etiquetas duplicadas añaden su valor al valor del campo.</p>
<p>Si se encuentra una etiqueta con valor cero, todos los enteros siguientes se interpretan como una serie de edictos de cuatro enteros, cada uno compuesto por la altura de bloque de ID de la runa, un índice de transacción de ID de la runa, la cantidad y salida.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Edict {
  id: RuneId,
  amount: u128,
  output: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Las alturas de bloque de ID de runa y los índices de transacción en los edictos son en codificación delta.</p>
<p>La decodificación del edicto de ID de runa comienza con una altura de bloque base y un índice de transacción inicial de cero. Al decodificar cada ID de runa, se añade primero el delta de la altura del bloque codificado a la altura del bloque base. Si el delta de la altura del bloque es cero, el siguiente entero es un delta del índice de transacción. Si el delta de la altura del bloque es mayor a cero, el siguiente entero es un índice de transacción absoluto.</p>
<p>Esto significa que los edictos deben ordenarse primero por ID de runa antes de ser codificados en una piedra rúnica.</p>
<p>Por ejemplo, para codificar los siguientes edictos:</p>
<div class="table-wrapper"><table><thead><tr><th>bloque</th><th>TX</th><th>cantidad</th><th>salida</th></tr></thead><tbody>
<tr><td>10</td><td>5</td><td>5</td><td>1</td></tr>
<tr><td>50</td><td>1</td><td>25</td><td>4</td></tr>
<tr><td>10</td><td>7</td><td>1</td><td>8</td></tr>
<tr><td>10</td><td>5</td><td>10</td><td>3</td></tr>
</tbody></table>
</div>
<p>Primero se ordenan por altura de bloque e índice de transacción:</p>
<div class="table-wrapper"><table><thead><tr><th>bloque</th><th>TX</th><th>cantidad</th><th>salida</th></tr></thead><tbody>
<tr><td>10</td><td>5</td><td>5</td><td>1</td></tr>
<tr><td>10</td><td>5</td><td>10</td><td>3</td></tr>
<tr><td>10</td><td>7</td><td>1</td><td>8</td></tr>
<tr><td>50</td><td>1</td><td>25</td><td>4</td></tr>
</tbody></table>
</div>
<p>Y luego el delta codificado como:</p>
<div class="table-wrapper"><table><thead><tr><th>delta del bloque</th><th>delta de TX</th><th>cantidad</th><th>salida</th></tr></thead><tbody>
<tr><td>10</td><td>5</td><td>5</td><td>1</td></tr>
<tr><td>0</td><td>0</td><td>10</td><td>3</td></tr>
<tr><td>0</td><td>2</td><td>1</td><td>8</td></tr>
<tr><td>40</td><td>1</td><td>25</td><td>4</td></tr>
</tbody></table>
</div>
<p>La piedra rúnica decodificada es un cenotafio si la salida de un edicto supera el número de salidas de la transacción, si se encuentra un ID de runa de edicto con bloque cero y un índice de transacción distinto de cero, o si un campo está truncado lo cual significa que una etiqueta se encuentra sin valor.</p>
<p>Cabe señalar que si se produce un cenotafio en este caso, el cenotafio no estará vacío, lo que significa que tiene los campos y edictos, que pueden incluir un grabado y un minteo.</p>
<h4 id="análisis-y-conversión-de-la-piedra-rúnica-runestone"><a class="header" href="#análisis-y-conversión-de-la-piedra-rúnica-runestone">Análisis y Conversión de la Piedra Rúnica (Runestone)</a></h4>
<p>La piedra rúnica:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Runestone {
  edicts: Vec&lt;Edict&gt;,
  etching: Option&lt;Etching&gt;,
  mint: Option&lt;RuneId&gt;,
  pointer: Option&lt;u32&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>Se analiza a partir del mensaje sin firmar utilizando las siguientes etiquetas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Tag {
  Body = 0,
  Flags = 2,
  Rune = 4,
  Premine = 6,
  Cap = 8,
  Amount = 10,
  HeightStart = 12,
  HeightEnd = 14,
  OffsetStart = 16,
  OffsetEnd = 18,
  Mint = 20,
  Pointer = 22,
  Cenotaph = 126,

  Divisibility = 1,
  Spacers = 3,
  Symbol = 5,
  Nop = 127,
}
<span class="boring">}</span></code></pre></pre>
<p>Ten en cuenta que las etiquetas se agrupan por paridad, es decir, si son pares o impares. Las etiquetas impares que no son reconocidas se ignoran. Las etiquetas pares que no son reconocidas producen un cenotafio.</p>
<p>Todas las etiquetas que no han sido utilizadas están reservadas para uso del protocolo, pueden asignarse en cualquier momento y no deben ser usadas.</p>
<h5 id="cuerpo-body"><a class="header" href="#cuerpo-body">Cuerpo (Body)</a></h5>
<p>La etiqueta <code>Body</code> indica el final de los campos de la piedra rúnica, causando que todos los enteros posteriores se interpreten como edictos.</p>
<h5 id="banderas-flag"><a class="header" href="#banderas-flag">Banderas (Flag)</a></h5>
<p>El campo <code>Flag</code> contiene un mapa de bits de banderas, cuya posición es <code>1 &lt;&lt; FLAG_VALUE</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Flag {
  Etching = 0,
  Terms = 1,
  Turbo = 2,
  Cenotaph = 127,
}
<span class="boring">}</span></code></pre></pre>
<p>La bandera <code>Etching</code> indica que esta transacción contiene un grabado.</p>
<p>La bandera <code>Terms</code> indica que el grabado de esta transacción tiene términos de minteo abiertos.</p>
<p>La bandera <code>Turbo</code> indica que el grabado de esta transacción opta por futuros cambios en el protocolo. Estos cambios pueden aumentar los costos de validación para clientes ligeros o ser altamente degenerados.</p>
<p>La bandera <code>Cenotaph</code> no es reconocida.</p>
<p>Si después de eliminar las banderas reconocidas, el valor del campo de banderas es distinto de cero, la piedra rúnica se considera un cenotafio.</p>
<h5 id="runa"><a class="header" href="#runa">Runa</a></h5>
<p>El campo <code>Rune</code> especifica el nombre de la runa que se está grabando. Si la bandera <code>Etching</code> está activa pero el campo <code>Rune</code> se omite, se asigna un nombre de runa reservado.</p>
<h5 id="premina"><a class="header" href="#premina">Premina</a></h5>
<p>El campo <code>Premine</code> especifica la cantidad de runas preminadas.</p>
<h5 id="tope"><a class="header" href="#tope">Tope</a></h5>
<p>El campo <code>Cap</code> especifica el número de minteos permitidos.</p>
<h5 id="cantidad"><a class="header" href="#cantidad">Cantidad</a></h5>
<p>El campo <code>Amount</code> especifica la cantidad de runas que recibe cada transacción de minteo.</p>
<h5 id="heightstart-y-heightend"><a class="header" href="#heightstart-y-heightend">HeightStart y HeightEnd</a></h5>
<p>Los campos <code>HeightStart</code> y <code>HeightEnd</code> especifican las alturas de bloque absolutas de inicio y fin del minteo. El minteo comienza en el bloque con altura <code>HeightStart</code> y finaliza en el bloque con altura <code>HeightEnd</code>.</p>
<h5 id="offsetstart-y-offsetend"><a class="header" href="#offsetstart-y-offsetend">OffsetStart y OffsetEnd</a></h5>
<p>Los campos <code>OffsetStart</code> y <code>OffsetEnd</code> especifican las alturas de bloque de inicio y fin del minteo, relativas al bloque en el que se extrae el grabado. El minteo comienza en el bloque con altura <code>OffsetStart + ETCHING_HEIGHT</code> y termina en el bloque con altura <code>OffsetEnd</code> + <code>ETCHING_HEIGHT</code>.</p>
<h5 id="minteo"><a class="header" href="#minteo">Minteo</a></h5>
<p>El campo <code>Mint</code> especifica el ID de la runa que se minteara en dicha transacción.</p>
<h5 id="puntero"><a class="header" href="#puntero">Puntero</a></h5>
<p>El campo <code>Pointer</code> indica el índice de la salida a la que deben transferirse las runas no asignadas por los edictos. Si el campo <code>Pointer</code> no está presente, las runas no asignadas se transfieren a la primera salida que no sea <code>OP_RETURN</code>.</p>
<h5 id="cenotafio"><a class="header" href="#cenotafio">Cenotafio</a></h5>
<p>El campo <code>Cenotaph</code> no es reconocido.</p>
<h5 id="divisibilidad"><a class="header" href="#divisibilidad">Divisibilidad</a></h5>
<p>El campo <code>Divisibility</code>, elevado a la potencia de diez, determina el número de subunidades en una unidad de runas.</p>
<p>Por ejemplo, aca se observa la cantidad <code>1234</code> de diferentes runas con divisibilidad de 0 a 3:</p>
<div class="table-wrapper"><table><thead><tr><th>Divisibilidad</th><th>Aparece</th></tr></thead><tbody>
<tr><td>0</td><td>1234</td></tr>
<tr><td>1</td><td>123.4</td></tr>
<tr><td>2</td><td>12.34</td></tr>
<tr><td>3</td><td>1.234</td></tr>
</tbody></table>
</div>
<h5 id="separadores"><a class="header" href="#separadores">Separadores</a></h5>
<p>El campo <code>Spacers</code> es un mapa de bits de separadores <code>•</code> que deben mostrarse entre las letras del nombre de una runa.</p>
<p>El campo N del mapa de bits, comenzando desde el menos significativo,  determina si debe mostrarse un separador entre los caracteres N y N+1, comenzando desde la izquierda del nombre de la runa.</p>
<p>Por ejemplo, el nombre de la runa <code>AAAA</code> representado con diferentes separadores:</p>
<div class="table-wrapper"><table><thead><tr><th>Separadores</th><th>Aparece</th></tr></thead><tbody>
<tr><td>0b1</td><td>A•AAA</td></tr>
<tr><td>0b11</td><td>A•A•AA</td></tr>
<tr><td>0b10</td><td>AA•AA</td></tr>
<tr><td>0b111</td><td>A•A•A•A</td></tr>
</tbody></table>
</div>
<p>Los separadores al final del nombre son ignorados.</p>
<h5 id="símbolo"><a class="header" href="#símbolo">Símbolo</a></h5>
<p>El campo <code>Symbol</code> representa el punto de código Unicode del símbolo de la runa, el cual debe aparecer después de las cantidades de esa runa. Si una runa no tiene un símbolo específico, se debe utilizar el carácter de moneda genérico <code>¤</code>.</p>
<p>Por ejemplo, si el <code>Symbol</code> es <code>#</code> y la divisibilidad es 2, la cantidad de <code>1234</code> unidades debe aparecer como <code>12.34 #</code>.</p>
<h5 id="nop"><a class="header" href="#nop">Nop</a></h5>
<p>El campo <code>Nop</code> no es reconocido.</p>
<h4 id="cenotafios"><a class="header" href="#cenotafios">Cenotafios</a></h4>
<p>Los cenotafios tienen los siguientes efectos:</p>
<ul>
<li>
<p>Todas las runas ingresadas a una transacción que contiene un cenotafio se queman.</p>
</li>
<li>
<p>Si la piedra rúnica que produjo el cenotafio contenía un grabado, la runa grabada tiene un suministro de cero y no se puede mintear.</p>
</li>
<li>
<p>Si la piedra rúnica que produjo el cenotafio es un minteo, esta se contabiliza contra el límite de minteos y las runas minteadas se queman.</p>
</li>
</ul>
<p>Los cenotafios pueden generarse si una piedra rúnica contiene una etiqueta par no reconocida, una bandera no reconocida, un edicto con un número de salida mayor al número de entradas, un ID de runa con bloque cero y un índice de transacción distinto a cero, un varint malformado, una instrucción que no es push de datos en el script pubkey de la salida de la piedra rúnica, una etiqueta sin valor posterior o enteros al final que no formen parte de un edicto.</p>
<h4 id="ejecución-de-la-piedra-rúnica"><a class="header" href="#ejecución-de-la-piedra-rúnica">Ejecución de la Piedra Rúnica</a></h4>
<p>Las piedras rúnicas se ejecutan en el orden en que sus transacciones se incluyan en los bloques.</p>
<h5 id="grabados"><a class="header" href="#grabados">Grabados</a></h5>
<p>Una piedra rúnica puede contener este grabado:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Etching {
  divisibility: Option&lt;u8&gt;,
  premine: Option&lt;u128&gt;,
  rune: Option&lt;Rune&gt;,
  spacers: Option&lt;u32&gt;,
  symbol: Option&lt;char&gt;,
  terms: Option&lt;Terms&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p><code>rune</code> es el nombre de la runa que sera grabada, codificada como un entero modificado de base-26.</p>
<p>Los nombres de runas consisten en las letras de la A a la Z, con la siguiente codificación:</p>
<div class="table-wrapper"><table><thead><tr><th>Nombre</th><th>Codificación</th></tr></thead><tbody>
<tr><td>A</td><td>0</td></tr>
<tr><td>B</td><td>1</td></tr>
<tr><td>…</td><td>…</td></tr>
<tr><td>Y</td><td>24</td></tr>
<tr><td>Z</td><td>25</td></tr>
<tr><td>AA</td><td>26</td></tr>
<tr><td>AB</td><td>27</td></tr>
<tr><td>…</td><td>…</td></tr>
<tr><td>AY</td><td>50</td></tr>
<tr><td>AZ</td><td>51</td></tr>
<tr><td>BA</td><td>52</td></tr>
</tbody></table>
</div>
<p>Y así sucesivamente.</p>
<p>Los nombres de runas <code>AAAAAAAAAAAAAAAAAAAAAAAAAAA</code> y superiores están reservados.</p>
<p>Si <code>rune</code> se omite, se asigna un nombre de runa reservado de la siguiente manera:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn reserve(block: u64, tx: u32) -&gt; Rune {
  Rune(
    6402364363415443603228541259936211926
    + (u128::from(block) &lt;&lt; 32 | u128::from(tx))
  )
}
<span class="boring">}</span></code></pre></pre>
<p><code>6402364363415443603228541259936211926</code> corresponde al nombre de runa <code>AAAAAAAAAAAAAAAAAAAAAAAAAAA</code>.</p>
<p>Si <code>rune</code> está presente, debe desbloquearse a partir del bloque en el que aparece el grabado.</p>
<p>Inicialmente, todos los nombres de runas de trece caracteres o más, hasta el primer nombre de runa reservado, están desbloqueados.</p>
<p>Las runas comienzan a desbloquearse en el bloque 840,000, el bloque en el que se activa el protocolo de runas.</p>
<p>A partir de entonces, cada período de 17,500 bloques, se desbloquea continuamente la siguiente longitud más corta de nombres de runas. Entre el bloque 840,000 y el 857,500, se desbloquean los nombres de runas de doce caracteres, entre el bloque 857,500 y el 875,000 se desbloquean los nombres de runas de once caracteres, y así sucesivamente, hasta que los nombres de runas de un solo carácter se desbloqueen entre el bloque 1,032,500 y el bloque 1,050,000. Consulte la base de código <code>ord</code> para el calendario preciso de desbloqueo.</p>
<p>Para evitar el front running de un grabado que ha sido transmitido pero no minado, si se está grabando un nombre de runa no reservado, la transacción de grabado debe contener un compromiso válido con el nombre que se está grabando.</p>
<p>Un compromiso consiste en un push de datos del nombre de la runa, codificado como un entero little-endian con los bytes de cero al final eliminados, presente en el testigo de entrada tapscript donde la salida que se gasta tiene al menos seis confirmaciones.</p>
<p>Si no hay un compromiso válido, se ignora el grabado.</p>
<h4 id="minteo-1"><a class="header" href="#minteo-1">Minteo</a></h4>
<p>Una piedra rúnica puede mintear una runa incluyendo el ID de la runa en el campo <code>Mint</code>.</p>
<p>Si el minteo está abierto, la cantidad minteada se añade a las runas no asignadas en las entradas de la transacción. Estas runas pueden ser transferidas usando edictos, y de lo contrario, se transferirán a la primera salida que no sea <code>OP_RETURN</code>, o a la salida designada por el campo <code>Pointer</code>.</p>
<p>Los minteos pueden realizarse en cualquier transacción despues del grabado, incluso en el mismo bloque.</p>
<h4 id="transferencia"><a class="header" href="#transferencia">Transferencia</a></h4>
<p>Las runas se transfieren por medio de edictos (edict):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Edict {
  id: RuneId,
  amount: u128,
  output: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Una piedra rúnica puede contener cualquier número de edictos, los cuales se procesan en secuencia.</p>
<p>Antes de procesar los edictos, las runas de entrada, así como las runas minteadas o preminadas, si las hay, no están asignadas.</p>
<p>Cada edicto reduce el saldo que no ha sido asignado de la runa <code>id</code> e incrementa el saldo asignado a las salidas de transacción de la runa <code>id</code>.</p>
<p>Si un edicto asignara más runas de las que no están asignadas, <code>amount</code> se reduce al número de runas que no estan asignadas. En otras palabras, el edicto asigna todas las unidades restantes que no han sido asignadas de la runa <code>id</code>.</p>
<p>Dado que el ID de una runa grabada no se conoce antes de que se incluya en un bloque, se usa el <code>ID 0:0</code> para referirse a la runa que se está grabando en esta transacción, si la hay.</p>
<p>Un edicto con con el valor <code>amount</code> igual a cero asigna todas las unidades restantes de la runa <code>id</code>.</p>
<p>Un edicto con <code>output</code> igual al número de salidas de la transacción asigna <code>amount</code> de runas a cada salida que no sea OP_RETURN en orden.</p>
<p>Un edicto con el valor de <code>amount</code> igual a cero y <code>output</code> igual al número de salidas de la transacción distribuye todas las unidades no asignadas de la runa <code>id</code> entre cada salida que no sea <code>OP_RETURN</code>. Si la cantidad de runas no asignadas no se puede dividir equitativamente entre las salidas que no son <code>OP_RETURN</code>, se asigna una runa adicional a las primeras <code>R</code> salidas que no son <code>OP_RETURN</code>, donde <code>R</code> es el residuo que queda después de dividir el balance de unidades no asignadas de la runa <code>id</code> por el número de salidas que no son <code>OP_RETURN</code>.</p>
<p>La piedra rúnica se convierte en un cenotafio si algún edicto en una piedra rúnica tiene un ID de runa con <code>block</code> igual a cero y <code>tx</code> mayor que cero, o <code>output</code> mayor que el número de salidas de la transacción.</p>
<p>Se debe tener en cuenta que los edictos en los cenotafios no se procesan, y todas las runas de entrada se queman.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../runes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../faq.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../runes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../faq.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
