<!DOCTYPE HTML>
<html lang="pt" class="coal" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Especificações - Ordinal Theory Handbook</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../language-picker.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "coal" : "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('coal')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introdução</a></li><li class="chapter-item expanded "><a href="../overview.html"><strong aria-hidden="true">1.</strong> Descrição Geral</a></li><li class="chapter-item expanded "><a href="../digital-artifacts.html"><strong aria-hidden="true">2.</strong> Artefatos Digitais</a></li><li class="chapter-item expanded "><a href="../inscriptions.html"><strong aria-hidden="true">3.</strong> Inscrições</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../inscriptions/delegate.html"><strong aria-hidden="true">3.1.</strong> Delegate</a></li><li class="chapter-item expanded "><a href="../inscriptions/metadata.html"><strong aria-hidden="true">3.2.</strong> Metadata</a></li><li class="chapter-item expanded "><a href="../inscriptions/pointer.html"><strong aria-hidden="true">3.3.</strong> Pointer</a></li><li class="chapter-item expanded "><a href="../inscriptions/provenance.html"><strong aria-hidden="true">3.4.</strong> Procedência</a></li><li class="chapter-item expanded "><a href="../inscriptions/recursion.html"><strong aria-hidden="true">3.5.</strong> Recursão</a></li><li class="chapter-item expanded "><a href="../inscriptions/rendering.html"><strong aria-hidden="true">3.6.</strong> Rendering</a></li><li class="chapter-item expanded "><a href="../inscriptions/examples.html"><strong aria-hidden="true">3.7.</strong> Examples</a></li></ol></li><li class="chapter-item expanded "><a href="../runes.html"><strong aria-hidden="true">4.</strong> Runes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../runes/specification.html" class="active"><strong aria-hidden="true">4.1.</strong> Especificações</a></li></ol></li><li class="chapter-item expanded "><a href="../faq.html"><strong aria-hidden="true">5.</strong> Perguntas Frequentes</a></li><li class="chapter-item expanded "><a href="../contributing.html"><strong aria-hidden="true">6.</strong> Contribuir</a></li><li class="chapter-item expanded "><a href="../donate.html"><strong aria-hidden="true">7.</strong> Doações</a></li><li class="chapter-item expanded "><a href="../guides.html"><strong aria-hidden="true">8.</strong> Guias</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/explorer.html"><strong aria-hidden="true">8.1.</strong> Explorador</a></li><li class="chapter-item expanded "><a href="../guides/wallet.html"><strong aria-hidden="true">8.2.</strong> Wallet</a></li><li class="chapter-item expanded "><a href="../guides/batch-inscribing.html"><strong aria-hidden="true">8.3.</strong> Batch Inscribing</a></li><li class="chapter-item expanded "><a href="../guides/collecting.html"><strong aria-hidden="true">8.4.</strong> Colecionando</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guides/collecting/sparrow-wallet.html"><strong aria-hidden="true">8.4.1.</strong> Carteira Sparrow</a></li></ol></li><li class="chapter-item expanded "><a href="../guides/moderation.html"><strong aria-hidden="true">8.5.</strong> Moderação</a></li><li class="chapter-item expanded "><a href="../guides/reindexing.html"><strong aria-hidden="true">8.6.</strong> Reindexação</a></li><li class="chapter-item expanded "><a href="../guides/sat-hunting.html"><strong aria-hidden="true">8.7.</strong> Caçando Sats</a></li><li class="chapter-item expanded "><a href="../guides/settings.html"><strong aria-hidden="true">8.8.</strong> Settings</a></li><li class="chapter-item expanded "><a href="../guides/teleburning.html"><strong aria-hidden="true">8.9.</strong> Teleburning</a></li><li class="chapter-item expanded "><a href="../guides/testing.html"><strong aria-hidden="true">8.10.</strong> Testando</a></li></ol></li><li class="chapter-item expanded "><a href="../bounties.html"><strong aria-hidden="true">9.</strong> Recompensas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../bounty/0.html"><strong aria-hidden="true">9.1.</strong> Recompensa 0: 100,000 sats reivindicados!</a></li><li class="chapter-item expanded "><a href="../bounty/1.html"><strong aria-hidden="true">9.2.</strong> Recompensa 1: 200,000 sats reivindicados!</a></li><li class="chapter-item expanded "><a href="../bounty/2.html"><strong aria-hidden="true">9.3.</strong> Recompensa 2: 300,000 sats reivindicados!</a></li><li class="chapter-item expanded "><a href="../bounty/3.html"><strong aria-hidden="true">9.4.</strong> Recompensa 3: 400,000 sats</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ordinal Theory Handbook</h1>

                    <div class="right-buttons">
                        <button id="language-toggle" class="icon-button" type="button"
                                title="Change language" aria-label="Change language"
                                aria-haspopup="true" aria-expanded="false"
                                aria-controls="language-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="language-list" class="theme-popup" aria-label="Languages" role="menu">
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="en">English</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="de">Deutsch</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="fr">Français</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="es">Español</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="pt">Português</a>
                          </button></li>
                           <li role="none"><button role="menuitem" class="theme">
                              <a id="ru">Русский</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="zh">中文版</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ja">日本語版</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ko">한국어</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="fil">Filipino</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="ar">العربية</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="hi">हिंदी</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="it">Italiano</a>
                          </button></li>
                          <li role="none"><button role="menuitem" class="theme">
                              <a id="nl">Nederlands</a>
                          </button></li>
                        </ul>

                        <script>
                          let langToggle = document.getElementById("language-toggle");
                          let langList = document.getElementById("language-list");
                          langToggle.addEventListener("click", (event) => {
                              langList.style.display = langList.style.display == "block" ? "none" : "block";
                          });
                          let selectedLang = document.getElementById("pt");
                          if (selectedLang) {
                              selectedLang.parentNode.classList.add("theme-selected");
                          }

                          // The path to the root, taking the current
                          // language into account.
                          let full_path_to_root = "../../";
                          // The page path (mdbook only gives us
                          // access to the path to the Markdown file).
                          let path = "runes/specification.md".replace(/\.md$/, ".html");
                          for (let lang of langList.querySelectorAll("a")) {
                              if (lang.id == "en") {
                                  lang.href = `${full_path_to_root}${path}`;
                              } else {
                                  lang.href = `${full_path_to_root}${lang.id}/${path}`;
                              }
                          }
                        </script>

                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ordinals/ord" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="as-runes-não-têm-uma-especificação"><a class="header" href="#as-runes-não-têm-uma-especificação">As Runes não têm uma Especificação</a></h1>
<p><code>ord</code> é a implementação de referência das Runes e constitui a especificação normativa do protocolo de Runes.</p>
<p>Nada do que ler aqui ou noutro lugar, para além do código <code>ord</code>, é uma especificação. Esta descrição em prosa do protocolo runes é fornecida como um guia para o comportamento do <code>ord</code>, e o código do próprio <code>ord</code> deve ser sempre consultado para confirmar a exatidão de qualquer descrição em prosa do mesmo.</p>
<p>Se, devido a um bug no <code>ord</code>, este documento divergir do comportamento real do <code>ord</code> e for impraticável alterar o comportamento do <code>ord</code>, este documento será corrigido para concordar com o comportamento real do <code>ord</code>.</p>
<p>Os utilizadores de implementações alternativas fazem-no por sua responsabilidade e risco, e os serviços que desejem integrar Runes são fortemente encorajados a usar o próprio <code>ord</code> para fazer transações de Runes, e para determinar o estado das runes, mints e saldos.</p>
<h2 id="pedras-rúnicas-runestones"><a class="header" href="#pedras-rúnicas-runestones">Pedras Rúnicas (Runestones)</a></h2>
<p>As mensagens do protocolo Rune são designadas por "runestones".</p>
<p>O protocolo das Runes foi ativado no bloco 840.000. As runestones de blocos anteriores são ignoradas.</p>
<p>Em termos abstractos, as runestones contêm os seguintes campos:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Runestone {
  edicts: Vec&lt;Edict&gt;,
  etching: Option&lt;Etching&gt;,
  mint: Option&lt;RuneId&gt;,
  pointer: Option&lt;u32&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>As runes são criadas por gravuras (etchings):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Etching {
  divisibility: Option&lt;u8&gt;,
  premine: Option&lt;u128&gt;,
  rune: Option&lt;Rune&gt;,
  spacers: Option&lt;u32&gt;,
  symbol: Option&lt;char&gt;,
  terms: Option&lt;Terms&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>Que podem conter termos de mintar:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Terms {
  amount: Option&lt;u128&gt;,
  cap: Option&lt;u128&gt;,
  height: (Option&lt;u64&gt;, Option&lt;u64&gt;),
  offset: (Option&lt;u64&gt;, Option&lt;u64&gt;),
}
<span class="boring">}</span></code></pre></pre>
<p>As runes são transferidas por éditos (edict):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Edict {
  id: RuneId,
  amount: u128,
  output: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Os IDs das runes são codificadas como a altura do bloco e o índice de transação da transação em que a rune foi gravada:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct RuneId {
  block: u64,
  tx: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Os IDs das runes são representados em texto como <code>BLOCK:TX</code>.</p>
<p>Os nomes das runes são codificados como números inteiros de base-26 modificados:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Rune(u128);
<span class="boring">}</span></code></pre></pre>
<h3 id="decifrar"><a class="header" href="#decifrar">Decifrar</a></h3>
<p>As runestones são decifradas a partir das transacções com os seguintes passos:</p>
<ol>
<li>
<p>Encontrar o primeiro output da transação cujo script pubkey começa por <code>OP_RETURN OP_13</code>.</p>
</li>
<li>
<p>Concatenar todos os dados seguintes num buffer de carga útil.</p>
</li>
<li>
<p>Descodificar uma sequência de números inteiros <a href="https://en.wikipedia.org/wiki/LEB128">LEB128</a> de 128 bits a partir do buffer de carga útil.</p>
</li>
<li>
<p>Analisar a sequência de números inteiros numa mensagem não escrita. (untyped).</p>
</li>
<li>
<p>Analisar a mensagem não escrita (untyped) numa runestone.</p>
</li>
</ol>
<p>A descodificação pode produzir uma runestone malformada, designada por <a href="https://en.wikipedia.org/wiki/Cenotaph">cenotáfio</a>.</p>
<h4 id="localizar-o-output-da-runestone"><a class="header" href="#localizar-o-output-da-runestone">Localizar o output da runestone</a></h4>
<p>Outputs are searched for the first script pubkey that beings with <code>OP_RETURN OP_13</code>. If deciphering fails, later matching outputs are not considered.</p>
<h4 id="montar-o-buffer-da-carga-útil-payload"><a class="header" href="#montar-o-buffer-da-carga-útil-payload">Montar o buffer da carga útil (payload)</a></h4>
<p>A memória intermédia da carga útil é montada concatenando os envios de dados, após <code>OP_13</code>, na pubkey do script correspondente.</p>
<p>Os data pushes são os opcodes 0 a 78, inclusive. Se for encontrado um opcode non-data push, i.e., qualquer opcode igual ou superior ao opcode 79, a runestone decifrada é um cenotáfio sem gravura, mint ou édito.</p>
<h4 id="descodificação-da-sequência-de-inteiros"><a class="header" href="#descodificação-da-sequência-de-inteiros">Descodificação da sequência de inteiros</a></h4>
<p>Uma sequência de números inteiros de 128 bits é descodificada a partir da carga útil como varints LEB128.</p>
<p>Os varints LEB128 são codificados como uma sequência de bytes, cada um dos quais com o bit mais significativo definido, exceto o último.</p>
<p>Se uma varint LEB128 contiver mais de 18 bytes, ia ultrapassar (overflow) um u128, ou é truncada, o que significa que o fim da memória intermédia do payload é atingido antes de se encontrar um byte com o bit de continuação não definido, a runestone descodificada é um cenotáfio sem gravação, mints ou éditos.</p>
<h4 id="analisar-a-mensagem"><a class="header" href="#analisar-a-mensagem">Analisar a mensagem</a></h4>
<p>A sequência de inteiros é analisada numa mensagem não escrita (untyped):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Message {
  fields: Map&lt;u128, Vec&lt;u128&gt;&gt;,
  edicts: Vec&lt;Edict&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>Os números inteiros são interpretados como uma sequência de pares etiqueta/valor (tag/value), com etiquetas duplicadas que acrescentam o seu valor ao valor do campo.</p>
<p>Se for encontrada uma etiqueta com valor zero, todos os números inteiros seguintes são interpretados como uma série de éditos de quatro números, cada um consistindo numa altura de bloco de ID de rune, índice de transação de ID de rune, montante e output.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Edict {
  id: RuneId,
  amount: u128,
  output: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>As alturas dos blocos ID de rune e os índices de transação nos éditos são codificados em delta.</p>
<p>A descodificação do ID da rune do édito começa com uma altura de bloco de base e um índice de transação de zero. Ao descodificar cada ID de rune, primeiro o delta da altura do bloco codificado é adicionado à altura do bloco de base. Se o delta da altura do bloco for zero, o número inteiro seguinte é um delta do índice de transação. Se o delta da altura do bloco for superior a zero, o número inteiro seguinte é um índice de transação absoluto.</p>
<p>Isto implica que os éditos devem primeiro ser ordenados por ID de rune antes de serem codificados numa runestone.</p>
<p>Por exemplo, para codificar os seguintes éditos:</p>
<div class="table-wrapper"><table><thead><tr><th>bloco</th><th>TX</th><th>quantidade</th><th>output</th></tr></thead><tbody>
<tr><td>10</td><td>5</td><td>5</td><td>1</td></tr>
<tr><td>50</td><td>1</td><td>25</td><td>4</td></tr>
<tr><td>10</td><td>7</td><td>1</td><td>8</td></tr>
<tr><td>10</td><td>5</td><td>10</td><td>3</td></tr>
</tbody></table>
</div>
<p>Em primeiro lugar, são ordenados pela altura do bloco e pelo índice da transação:</p>
<div class="table-wrapper"><table><thead><tr><th>bloco</th><th>TX</th><th>quantidade</th><th>output</th></tr></thead><tbody>
<tr><td>10</td><td>5</td><td>5</td><td>1</td></tr>
<tr><td>10</td><td>5</td><td>10</td><td>3</td></tr>
<tr><td>10</td><td>7</td><td>1</td><td>8</td></tr>
<tr><td>50</td><td>1</td><td>25</td><td>4</td></tr>
</tbody></table>
</div>
<p>E depois codificado em delta como:</p>
<div class="table-wrapper"><table><thead><tr><th>Bloco Delta</th><th>TX delta</th><th>quantidade</th><th>output</th></tr></thead><tbody>
<tr><td>10</td><td>5</td><td>5</td><td>1</td></tr>
<tr><td>0</td><td>0</td><td>10</td><td>3</td></tr>
<tr><td>0</td><td>2</td><td>1</td><td>8</td></tr>
<tr><td>40</td><td>1</td><td>25</td><td>4</td></tr>
</tbody></table>
</div>
<p>Se a output de um édito for superior ao número de outputs da transação, se for encontrada uma ID de rune de édito com bloco zero e índice de transação diferente de zero ou se um campo for truncado, ou seja, se for encontrada uma etiqueta sem valor, a rune descodificada é um cenotáfio.</p>
<p>Note-se que, se um cenotáfio for produzido aqui, o cenotáfio não está vazio, o que significa que contém os campos e os éditos, que podem incluir uma gravura e um mint.</p>
<h4 id="analisar-a-runestone"><a class="header" href="#analisar-a-runestone">Analisar a runestone</a></h4>
<p>A runestone:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Runestone {
  edicts: Vec&lt;Edict&gt;,
  etching: Option&lt;Etching&gt;,
  mint: Option&lt;RuneId&gt;,
  pointer: Option&lt;u32&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p>É analisado a partir da mensagem não assinada utilizando as seguintes etiquetas:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Tag {
  Body = 0,
  Flags = 2,
  Rune = 4,
  Premine = 6,
  Cap = 8,
  Amount = 10,
  HeightStart = 12,
  HeightEnd = 14,
  OffsetStart = 16,
  OffsetEnd = 18,
  Mint = 20,
  Pointer = 22,
  Cenotaph = 126,

  Divisibility = 1,
  Spacers = 3,
  Symbol = 5,
  Nop = 127,
}
<span class="boring">}</span></code></pre></pre>
<p>Note que as etiquetas são agrupadas por paridade, ou seja, se são pares ou ímpares. As etiquetas ímpares não reconhecidas são ignoradas. Os tags pares não reconhecidos produzem um cenotáfio.</p>
<p>All unused tags are reserved for use by the protocol, may be assigned at any time, and should not be used.</p>
<h5 id="corpo-body"><a class="header" href="#corpo-body">Corpo (Body)</a></h5>
<p>A etiqueta <code>Body</code> marca o fim dos campos da runestone, fazendo com que todos os números inteiros seguintes sejam interpretados como éditos.</p>
<h5 id="bandeiras-flag"><a class="header" href="#bandeiras-flag">Bandeiras (Flag)</a></h5>
<p>O campo <code>Flag</code> contém um mapa de bits de bandeiras, cuja posição é <code>1 &lt;&lt; FLAG_VALUE</code>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>enum Flag {
  Etching = 0,
  Terms = 1,
  Turbo = 2,
  Cenotaph = 127,
}
<span class="boring">}</span></code></pre></pre>
<p>A marca <code>Etching</code> assinala esta transação como incluindo uma gravura.</p>
<p>O sinalizador <code>Terms</code> marca a gravação desta transação como tendo termos de mint abertos.</p>
<p>O sinalizador <code>Turbo</code> marca a gravação desta transação como tendo optado por futuras alterações de protocolo. Estas alterações de protocolo podem aumentar os custos de validação do cliente levemente, ou simplesmente ser muito alta.</p>
<p>A bandeira <code>Cenotaph</code> não é reconhecida.</p>
<p>Se o valor do campo flags após remover as flags reconhecidas for diferente de zero, a runestone é um cenotáfio.</p>
<h5 id="rune"><a class="header" href="#rune">Rune</a></h5>
<p>O campo <code>Rune</code> contém o nome da rune que está a ser gravada. Se a bandeira <code>Etching</code> estiver definida mas o campo <code>Rune</code> for omitido, é atribuído um nome de rune reservado.</p>
<h5 id="pré-mineração"><a class="header" href="#pré-mineração">Pré-mineração</a></h5>
<p>O campo <code>Premine</code> contém a quantidade de runes pré-mineradas.</p>
<h5 id="limite"><a class="header" href="#limite">Limite</a></h5>
<p>O campo <code>Cap</code> contém o número permitido de mints</p>
<h5 id="quantidade"><a class="header" href="#quantidade">Quantidade</a></h5>
<p>O campo <code>Amount</code> contém a quantidade de runes que cada transação de mint recebe.</p>
<h5 id="altura-inicial-heightstart-e-altura-final-heightend"><a class="header" href="#altura-inicial-heightstart-e-altura-final-heightend">(altura inicial) HeightStart e (altura final) HeightEnd</a></h5>
<p>Os campos <code>HeightStart</code> e <code>HeightEnd</code> contêm as alturas absolutas do início e do fim do bloco do mint, respetivamente. O mint está aberto a partir do bloco com a altura <code>HeightStart</code> e fecha no bloco com a altura <code>HeightEnd</code>.</p>
<h5 id="desvio-inicial-offsetstart-e-desvio-final-offsetend"><a class="header" href="#desvio-inicial-offsetstart-e-desvio-final-offsetend">(desvio inicial) OffsetStart e (desvio final) OffsetEnd</a></h5>
<p>Os campos <code>OffsetStart</code> e <code>OffsetEnd</code> contêm as alturas inicial e final do bloco do mint, relativamente ao bloco em que a gravura é extraída. o mint abre no bloco com a altura <code>OffsetStart + ETCHING_HEIGHT</code>, e fecha no bloco com a altura <code>OffsetEnd</code> + <code>ETCHING_HEIGHT</code>.</p>
<h5 id="mint"><a class="header" href="#mint">Mint</a></h5>
<p>O campo <code>Mint</code> contém o ID da rune a ser mintada nesta transação.</p>
<h5 id="pointer"><a class="header" href="#pointer">Pointer</a></h5>
<p>The <code>Pointer</code> field contains the index of the output to which runes unallocated by edicts should be transferred. If the <code>Pointer</code> field is absent, unallocated runes are transferred to the first non-<code>OP_RETURN</code> output. If the pointer is greater than the number of outputs, the runestone is a cenotaph.</p>
<h5 id="cenotáfio"><a class="header" href="#cenotáfio">Cenotáfio</a></h5>
<p>O campo do <code>Cenotaph</code> não é reconhecido.</p>
<h5 id="divisibilidade"><a class="header" href="#divisibilidade">Divisibilidade</a></h5>
<p>O campo <code>Divisibility</code>, elevado à potência de dez, é o número de subunidades numa super unidade de runes.</p>
<p>Por exemplo, a quantidade <code>1234</code> de diferentes runes com divisibilidade de 0 a 3 é apresentada da seguinte forma:</p>
<div class="table-wrapper"><table><thead><tr><th>Divisibilidade</th><th>Visualização</th></tr></thead><tbody>
<tr><td>0</td><td>1234</td></tr>
<tr><td>1</td><td>123.4</td></tr>
<tr><td>2</td><td>12.34</td></tr>
<tr><td>3</td><td>1.234</td></tr>
</tbody></table>
</div>
<h5 id="espaçadores"><a class="header" href="#espaçadores">Espaçadores</a></h5>
<p>O campo <code>Spacers</code> é um campo de bits de <code>•</code> espaçadores que devem ser apresentados entre as letras do nome da rune.</p>
<p>O campo N do campo de bits, começando pelo menos significativo, determina se deve ou não ser apresentado um espaçador entre o N e o N+1 caráter, começando pela esquerda do nome da rune.</p>
<p>Por exemplo, o nome da rune <code>AAAA</code> é apresentado com espaçadores diferentes:</p>
<div class="table-wrapper"><table><thead><tr><th>Espaçadores</th><th>Visualização</th></tr></thead><tbody>
<tr><td>0b1</td><td>A•AAA</td></tr>
<tr><td>0b11</td><td>A•A•AA</td></tr>
<tr><td>0b10</td><td>AA•AA</td></tr>
<tr><td>0b111</td><td>A•A•A•A</td></tr>
</tbody></table>
</div>
<p>Os espaçadores à direita são ignorados.</p>
<h5 id="símbolo"><a class="header" href="#símbolo">Símbolo</a></h5>
<p>O campo <code>Symbol</code> é o ponto de código Unicode do símbolo de moeda da rune, que deve ser apresentado após os montantes dessa rune. Se uma rune não tiver um símbolo de moeda, deve ser usado o carácter genérico de moeda <code>¤</code>.</p>
<p>Por exemplo, se o <code>Symbol</code> é <code>#</code> e a divisibilidade é 2, a quantidade de <code>1234</code> unidades deve ser apresentada como <code>12.34 #</code>.</p>
<h5 id="nop"><a class="header" href="#nop">Nop</a></h5>
<p>O campo Nop não é reconhecido.</p>
<h4 id="cenotáfios"><a class="header" href="#cenotáfios">Cenotáfios</a></h4>
<p>Os cenotáfios têm os seguintes efeitos:</p>
<ul>
<li>
<p>Todas as runes introduzidas numa transação que contenha um cenotáfio são queimadas.</p>
</li>
<li>
<p>Se a runestone que produziu o cenotáfio continha uma gravura, a rune gravada tem fornecimento zero e não pode ser mintada.</p>
</li>
<li>
<p>Se a runestone que produziu o cenotáfio for um mint, o mint conta para o limite de mints e as runes mintadas são queimadas.</p>
</li>
</ul>
<p>Cenotáfios podem ser criados se uma runestone contiver uma tag par não reconhecida, uma flag não reconhecida, um édito com um número de saída maior que o número de entradas, um ID de rune com bloco zero e índice de transação diferente de zero, um varint mal formado, uma instrução non-datapush no script pubkey da saída da runestone, uma tag sem um valor subsequente, ou inteiros finais que não fazem parte de um édito.</p>
<h4 id="executar-a-runestone"><a class="header" href="#executar-a-runestone">Executar a runestone</a></h4>
<p>As runestones são executados na ordem em que as suas transações são incluídas nos blocos.</p>
<h5 id="gravuras"><a class="header" href="#gravuras">Gravuras</a></h5>
<p>Uma runestone pode conter uma gravura:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Etching {
  divisibility: Option&lt;u8&gt;,
  premine: Option&lt;u128&gt;,
  rune: Option&lt;Rune&gt;,
  spacers: Option&lt;u32&gt;,
  symbol: Option&lt;char&gt;,
  terms: Option&lt;Terms&gt;,
}
<span class="boring">}</span></code></pre></pre>
<p><code>rune</code>  é o nome da rune a ser gravada, codificado como um número inteiro de base-26 modificado.</p>
<p>Os nomes das runes consistem nas letras de A a Z, com a seguinte codificação:</p>
<div class="table-wrapper"><table><thead><tr><th>Nome</th><th>Codificação</th></tr></thead><tbody>
<tr><td>A</td><td>0</td></tr>
<tr><td>B</td><td>1</td></tr>
<tr><td>…</td><td>…</td></tr>
<tr><td>Y</td><td>24</td></tr>
<tr><td>Z</td><td>25</td></tr>
<tr><td>AA</td><td>26</td></tr>
<tr><td>AB</td><td>27</td></tr>
<tr><td>…</td><td>…</td></tr>
<tr><td>AY</td><td>50</td></tr>
<tr><td>AZ</td><td>51</td></tr>
<tr><td>BA</td><td>52</td></tr>
</tbody></table>
</div>
<p>E assim em diante.</p>
<p>Os nomes de runes <code>AAAAAAAAAAAAAAAAAAAAAAAAAAA</code> e superiores estão reservados.</p>
<p>Se a <code>rune</code> for omitida, é atribuído um nome de rune reservado da seguinte forma</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn reserve(block: u64, tx: u32) -&gt; Rune {
  Rune(
    6402364363415443603228541259936211926
    + (u128::from(block) &lt;&lt; 32 | u128::from(tx))
  )
}
<span class="boring">}</span></code></pre></pre>
<p><code>6402364363415443603228541259936211926</code> corresponde ao nome da rune <code>AAAAAAAAAAAAAAAAAAAAAAAAAAA</code>.</p>
<p>Se a <code>rune</code> estiver presente, deve ser desbloqueada a partir do bloco em que a gravura aparece.</p>
<p>Inicialmente, todos os nomes de runes de comprimento igual ou superior a treze, até ao primeiro nome de rune reservado, são desbloqueados.</p>
<p>As runes começam a ser desbloqueadas no bloco 840.000, o bloco em que o protocolo de runes é ativado.</p>
<p>A partir daí, a cada período de 17.500 blocos, o próximo comprimento mais curto de nomes de runes é continuamente desbloqueado. Assim, entre o bloco 840.000 e o bloco 857.500, os nomes das runes de doze caracteres são desbloqueados, entre o bloco 857.500 e o bloco 875.000 os nomes das runes de onze caracteres são desbloqueados, e assim sucessivamente, até que os nomes das runes de um carácter sejam desbloqueados entre o bloco 1.032.500 e o bloco 1.050.000. Vê a base de código <code>ord</code> para saberes o calendário exato do desbloqueio.</p>
<p>Para evitar a execução antecipada de uma gravura que tenha sido transmitida mas não minerada, se um nome de rune não reservado estiver a ser gravado, a transação de gravura deve conter umcompromisso válido para o nome que está a ser gravado.</p>
<p>Um compromisso consiste num envio de dados do nome da rune, codificado como um número inteiro little-endian com o zero byte final eliminado, presente num tapscript de testemunha de entrada em que a output que está a ser gasta tem pelo menos seis confirmações.</p>
<p>Se não estiver presente um compromisso válido, a gravação é ignorada.</p>
<h4 id="mintar"><a class="header" href="#mintar">Mintar</a></h4>
<p>Uma runestone pode cunhar uma rune ao incluir o ID da rune no campo <code>Mint</code>.</p>
<p>Se o mint estiver aberto, o montante do mint é adicionado às runes não atribuídas no input da transação. Estas runes podem ser transferidas através de éditos e, caso contrário, serão transferidas para o primeira output que não seja <code>OP_RETURN</code> ou para o output designado pelo campo <code>Pointer</code>.</p>
<p>Os mints podem ser feitos em qualquer transação após uma gravação, incluindo no mesmo bloco.</p>
<h4 id="transferência"><a class="header" href="#transferência">Transferência</a></h4>
<p>As runes são transferidas por éditos (edict):</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Edict {
  id: RuneId,
  amount: u128,
  output: u32,
}
<span class="boring">}</span></code></pre></pre>
<p>Uma rune pode conter qualquer número de éditos, que são processados em sequência.</p>
<p>Antes de os éditos serem processados, as runes de entrada, bem como as runes mintadas ou pré-minadas, se existirem, não são atribuídas.</p>
<p>Cada édito diminui o saldo não alocado da rune id e aumenta o saldo alocado aos outputs da transação da rune <code>id</code>.</p>
<p>Se um édito alocar mais runes do que as que não estão atualmente alocadas, o montante é reduzido para o número de runes atualmente não alocadas. Por outras palavras, o édito aloca todas as unidades restantes não alocadas da rune <code>id</code>.</p>
<p>Uma vez que o ID de uma rune gravada não é conhecido antes de ser incluído num bloco, o ID <code>0:0</code> é utilizado para significar a rune que está a ser gravada nesta transação, caso exista.</p>
<p>Um édito com <code>amount</code> zero aloca todas as unidades restantes da rune <code>id</code>.</p>
<p>Um édito com <code>output</code> igual ao número de outputs da transação atribui o <code>amount</code> de runes a cada output não <code>OP_RETURN</code>, por ordem.</p>
<p>Um decreto com <code>amount</code> zero e <code>output</code> igual ao número de outputs de transação divide todas as unidades não alocadas de <code>id</code> de rune entre cada output não-<code>OP_RETURN</code>. Se o número de runes não atribuídas não for divisível pelo número de outputs não <code>OP_RETURN</code>, é atribuída 1 rune adicional às primeiras <code>R</code> outputs não <code>OP_RETURN</code>, em que <code>R</code> é o resto após dividir o saldo de unidades não atribuídas de <code>id</code> de rune pelo número de outputs não <code>OP_RETURN</code>.</p>
<p>Se qualquer édito numa rune tiver uma ID de rune com <code>block</code> zero e <code>tx</code> superior a zero, ou um <code>output</code> superior ao número de outputs de transação, a rune é um cenotáfio.</p>
<p>Note que os éditos em cenotáfios não são processados, e todos os inputs das runes são queimados.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../runes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../faq.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../runes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../faq.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
